language: java
dist: trusty

jdk:
  - oraclejdk8
  - openjdk8

env:
  - MVN_ARGS=
  - MVN_ARGS="-P apache -Dhadoop.version=3.0.0 -Dhive.version=3.1.0"
  - MVN_ARGS="-P hortonworks -Dhadoop.version=3.0.0.3.0.0.3-2 -Dhive.version=3.1.0.3.1.0.6-1"

# Builds an uber-jar with all dependencies.
script: "mvn $MVN_ARGS clean install"

# Removes install outputs so that the cache is stable.
before_cache:
  - rm -rf $HOME/.m2/repository/com/exasol
  - find $HOME/.m2 -name resolver-status.properties -exec rm {} \;

cache:
  directories:
    - $HOME/.m2
